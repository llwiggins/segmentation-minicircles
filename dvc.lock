schema: '2.0'
stages:
  data_split:
    cmd: python src/data_split.py
    deps:
    - path: data/all_data/
      hash: md5
      md5: e30f282673de6a2022f4ba4168063db1.dir
      size: 139626901
      nfiles: 301
    - path: src/data_split.py
      hash: md5
      md5: 92cbc3ea6a0740e559466a998e11ba99
      size: 3506
    params:
      params.yaml:
        base:
          random_seed: 0
          model_image_size: 512
          loss_function: dice_loss
          image_channels: 1
          output_classes: 1
        data_split:
          test_split: 0.2
          data_dir: data/all_data/
          train_data_dir: data/train/
          test_data_dir: data/test/
    outs:
    - path: data/test
      hash: md5
      md5: d795628ab29b4282d75fbd2029f012e1.dir
      size: 23405256
      nfiles: 60
    - path: data/train
      hash: md5
      md5: c7e0d9c9b40dc565fe8f53fc2e54cd5c.dir
      size: 116215497
      nfiles: 240
  train:
    cmd: python src/train.py
    deps:
    - path: data/train/
      hash: md5
      md5: c7e0d9c9b40dc565fe8f53fc2e54cd5c.dir
      size: 116215497
      nfiles: 240
    - path: src/train.py
      hash: md5
      md5: 7616597ba3d5a1c528347f7cd622c751
      size: 14904
    - path: src/unet.py
      hash: md5
      md5: 02054ba044ba73a69128c66c7725a717
      size: 8405
    params:
      params.yaml:
        base:
          random_seed: 0
          model_image_size: 512
          loss_function: dice_loss
          image_channels: 1
          output_classes: 1
        train:
          train_data_dir: data/train/
          model_save_dir: models/
          batch_size: 9
          epochs: 5
          conv_activation_function: relu
          final_activation_function: sigmoid
          learning_rate: 0.0001
          augment_zoom_percent: 0.2
          augment_flip_rotate: true
          augment_vshift:
          - 0
          - 0
          norm_upper_bound: 5
          norm_lower_bound: -1
          validation_split: 0.2
    outs:
    - path: models/output-model.keras
      hash: md5
      md5: 7429d91575b009ff9cbe3337f204cfb8
      size: 23460573
    - path: results/train/
      hash: md5
      md5: 9fc2dac9ce2aafca4db90e2c6c1dd9c9.dir
      size: 677
      nfiles: 5
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: data/test/
      hash: md5
      md5: d795628ab29b4282d75fbd2029f012e1.dir
      size: 23405256
      nfiles: 60
    - path: models/output-model.keras
      hash: md5
      md5: 7429d91575b009ff9cbe3337f204cfb8
      size: 23460573
    - path: src/evaluate.py
      hash: md5
      md5: 80cbd78857db43137f24118a3ed04caa
      size: 7797
    - path: src/unet.py
      hash: md5
      md5: 02054ba044ba73a69128c66c7725a717
      size: 8405
    params:
      params.yaml:
        base:
          random_seed: 0
          model_image_size: 512
          loss_function: dice_loss
          image_channels: 1
          output_classes: 1
        evaluate:
          model_path: models/output-model.keras
          test_data_dir: data/test/
    outs:
    - path: results/evaluate/
      hash: md5
      md5: e8de43b2302b03793d858fe65509dcc0.dir
      size: 5382433
      nfiles: 16
